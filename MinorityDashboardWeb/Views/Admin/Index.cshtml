@using MinorityDashboard.DataModel;
@model List<gp_district_scheme_details_Result>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container-fluid">

    <button type="button" class="btn btn-info" onclick="ShowDistrictBud()">District-Budgetary Amount</button>

    <button type="button" class="btn btn-info" onclick="SchemeDistrictBud()">Scheme-Budgetary Amount</button>

    <button type="button" class="btn btn-info" onclick="HideGraphs()">Hide Graph</button>


    @using (Html.BeginForm("Index", "Admin", null, FormMethod.Post))
    {

        <div Style="font-family: Corbel; font-size: small ;text-align:center; display:none" class="row" id="DisB">
            <div style="width:100%;height:50%">
                <canvas id="myChart" style="padding: 0;margin: auto;display: block; "> </canvas>
            </div>
        </div>

        <div Style="font-family: Corbel; font-size: small ;text-align:center;display:none " class="row" id="SchB">
            <div style="width:100%;height:100%">
                <canvas id="myChart1" style="padding: 0;margin: auto;display: block; "> </canvas>
            </div>
        </div>


        <script>
            $.ajax({
                type: "POST",
                url: "/Admin/NewChart",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (mems) {
                    var aData = mems;
                    var aLabels = aData[1];
                    var aDatasets1 = aData[0];
                    var aDatasets2 = aData[3];
                    var aLabels1 = aData[4];
                    var dataT = {
                        labels: aLabels,
                        datasets: [{
                            label: "District Name",
                            data: aDatasets1,
                            fill: false,
                            backgroundColor: aData[2],
                            borderWidth: 1
                        }]
                    };
                    var ctx = $("#myChart").get(0).getContext("2d");
                    var myNewChart = new Chart(ctx, {
                        type: 'pie',
                        data: dataT,
                        options: {
                            responsive: true,
                            title: { display: true, text: 'District-budgetary Amount' },
                            legend: { position: 'bottom' },
                            scales: {
                                xAxes: [{ gridLines: { display: true, offsetGridLines: true }, display: true, scaleLabel: { display: false, labelString: '' } }],
                                yAxes: [{ gridLines: { display: true, offsetGridLines: true }, display: true, scaleLabel: { display: false, labelString: '' } }]
                            },
                        }
                    });


                    var dataT1 = {
                        labels: aLabels1,
                        datasets: [{
                            label: "Scheme Name",
                            data: aDatasets2,
                            fill: false,
                            backgroundColor: aData[2],
                            borderWidth: 1
                        }]
                    };


                    var ctx1 = $("#myChart1").get(0).getContext("2d");
                    var myNewChart = new Chart(ctx1, {
                        type: 'pie',
                        data: dataT1,
                        options: {
                            responsive: true,
                            title: { display: true, text: 'Scheme-budgetary Amount' },
                            legend: { position: 'bottom' },
                            scales: {
                                xAxes: [{ gridLines: { display: true, offsetGridLines: true }, display: true, scaleLabel: { display: false, labelString: '' } }],
                                yAxes: [{ gridLines: { display: true, offsetGridLines: true }, display: true, scaleLabel: { display: false, labelString: '' } }]
                            },
                        }
                    });

                }
            });
        </script>

    }


    <div class="card-body">
        <div class="table-responsive">

            @if (Model != null)
            {

                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Scheme Name</th>
                            <th>District Name</th>
                            <th>Implementation Agency</th>
                            <th>Disbursed Amount</th>
                            <th>Sanctioned Amount</th>
                            <th>Expenditure Amount</th>
                            <th>Work Progress</th>
                            <th>Download UC</th>
                        </tr>
                    </thead>

                    <tbody>

                        @foreach (var X in Model)
                        {
                            string docpath = "../../UCDoc/" + X.utilization_certificate;

                            <tr>
                                <td> @X.parent_schemename_e </td>
                                <td>@X.des_name</td>
                                <td>@X.agency_name</td>
                                <td>@X.budgetary_provision_amt</td>
                                <td>@X.actual_allocation_amt</td>
                                <td>@X.actual_expenditure_amt</td>

                                <td>@X.work_progress_desc</td>

                                <td> <a target="_blank" href=@HttpUtility.UrlPathEncode(docpath)> <i class="fa fa-download btn_ico"></i> </a></td>


                            </tr>
                        }


                    </tbody>
                </table>
            }
        </div>
    </div>

    <script type="text/javascript">

        function ShowDistrictBud() {

            $("#DisB").show();
            $("#SchB").hide();


        }
        function SchemeDistrictBud() {

            $("#SchB").show();
            $("#DisB").hide();
        }

        

        function HideGraphs() {

            $("#SchB").hide();
            $("#DisB").hide();
        }

    </script>


</div>

<script type="text/javascript">

    function Showchart() {
        var aData = $("#hddv").val();   //[{ "des_id": 1, "des_name": "Thane" }, { "des_id": 2, "des_name": "Pune " }, { "des_id": 3, "des_name": "Mumbai Suburban" }, { "des_id": 4, "des_name": "Nashik " }, { "des_id": 5, "des_name": "Nagpur " }];
        var aLabels = $("#hddv2").val(); //aData[0];  //["January", "February", "March", "April", "May", "June"];



        var aDatasets1 = $("#hddv1").val(); //aData[1]; //[4215, 5312, 6251, 7841, 9821, 14984];

        alert(aDatasets1);

        var dataT = {
            labels: aLabels,
            datasets: [{
                label: "Test Data",
                data: aDatasets1,
                fill: false,
                backgroundColor: ["rgba(54, 162, 235, 0.2)", "rgba(255, 99, 132, 0.2)", "rgba(255, 159, 64, 0.2)", "rgba(255, 205, 86, 0.2)", "rgba(75, 192, 192, 0.2)", "rgba(153, 102, 255, 0.2)", "rgba(201, 203, 207, 0.2)"],
                borderColor: ["rgb(54, 162, 235)", "rgb(255, 99, 132)", "rgb(255, 159, 64)", "rgb(255, 205, 86)", "rgb(75, 192, 192)", "rgb(153, 102, 255)", "rgb(201, 203, 207)"],
                borderWidth: 1
            }]
        }

        var ctx = $("#myChart").get(0).getContext("2d");
        var myNewChart = new Chart(ctx, {
            type: 'pie',
            data: dataT,
            options: {
                responsive: true,
                title: { display: true, text: 'CHART.JS DEMO CHART' },
                legend: { position: 'bottom' },
                scales: {
                    xAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' } }],
                    yAxes: [{ gridLines: { display: false }, display: true, scaleLabel: { display: false, labelString: '' }, ticks: { stepSize: 50, beginAtZero: true } }]
                },
            }
        });
    }


    $(document).ready(function () {


    });

    window.onload = function () {

        //var ctx = document.getElementById("myBarChart1");
        //var myLineChart = new Chart(ctx, {
        //    type: 'bar',

        //    data: {
        //        labels: ["January", "February", "March", "April", "May", "June"],
        //        datasets: [{
        //            label: "Revenue",
        //            backgroundColor: "rgba(2,117,216,1)",
        //            borderColor: "rgba(2,117,216,1)",
        //            //data: [{ "des_id": 1, "des_name": "Thane" }, { "des_id": 2, "des_name": "Pune " }, { "des_id": 3, "des_name": "Mumbai Suburban" }, { "des_id": 4, "des_name": "Nashik " }, { "des_id": 5, "des_name": "Nagpur " }]

        //            data: [4215, 5312, 6251, 7841, 9821, 14984],
        //        }],


        //    },
        //    options: {
        //        scales: {
        //            xAxes: [{
        //                time: {
        //                    unit: 'month'
        //                },
        //                gridLines: {
        //                    display: false
        //                },
        //                ticks: {
        //                    maxTicksLimit: 6
        //                }
        //            }],
        //            yAxes: [{
        //                ticks: {
        //                    min: 0,
        //                    max: 15000,
        //                    maxTicksLimit: 5
        //                },
        //                gridLines: {
        //                    display: true
        //                }
        //            }],
        //        },
        //        legend: {
        //            display: false
        //        }
        //    }
        //});



    }
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

