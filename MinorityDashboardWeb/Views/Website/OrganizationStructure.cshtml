
@{
    ViewBag.Title = "OrganizationStructure";
    Layout = "~/Views/Shared/_LayoutWeb.cshtml";
}

    <div class="card-header">Scheme Master</div>
    <div id="chart" class="form-group" style="width: 650px;margin-left: 24%;">
    </div>



@*<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>*@
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["orgchart"] });
    google.setOnLoadCallback(drawChart);
    function drawChart() {
        var newrec = [[1, "Nancy Davolio", "Sales Representative", 5], [2, "Andrew Fuller", "CEO", 3], [3, "Janet Leverling", "Managing Director", null], [4, "Margaret Peacock", "Sales Representative", 9], [5, "Steven Buchanan", "Sales Manager", 2], [6, "Michael Suyama", "Sales Representative", 8], [7, "Robert King", "Sales Representative", 8], [8, "Laura Callahan", "Sales Manager", 2], [9, "Anne Dodsworth", "Sales Representative", 2]];
        //$.ajax({

        //    type: "POST",
        //    url: "/Home/AjaxMethod",
        //    data: newrec,
        //    contentType: "application/json; charset=utf-8",
        //    dataType: "json",
        //    success: function (r) {



        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Entity');
        data.addColumn('string', 'ParentEntity');
        data.addColumn('string', 'ToolTip');
        for (var i = 0; i < newrec.length; i++) {
            var employeeId = newrec[i][0].toString();
            var employeeName = newrec[i][1];
            var designation = newrec[i][2];
            var reportingManager = newrec[i][3] != null ? newrec[i][3].toString() : '';
            data.addRows([[{
                v: employeeId,
                f: employeeName + '<div>(<span>' + designation + '</span>)</div><img src = "/Pictures/' + employeeId + '.jpg" />'
            }, reportingManager, designation]]);
        }
        var chart = new google.visualization.OrgChart($("#chart")[0]);
        chart.draw(data, { allowHtml: true });
        //},
        //failure: function (r) {
        //    alert(r);
        //},
        //error: function (r) {
        //    alert(r);
        //}
        // });
    }
</script>


